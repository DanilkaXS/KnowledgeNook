<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KnowledgeNook | Профіль</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/headers/">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
            integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
            crossorigin="anonymous"></script>
    <style>
        .card {
            width: 400px;
            border: none;
            border-radius: 10px;

            background-color: #fff;
        }


        .stats {

            background: #f2f5f8 !important;

            color: #000 !important;
        }

        .articles {
            font-size: 15px;
            color: #a1aab9;
        }

        .number1 {
            font-weight: 500;
        }

        .rating {
            font-size: 15px;
            color: #a1aab9;
        }

        .number3 {
            font-weight: 500;
        }
    </style>
</head>
<body>
<header>
    <div class="header-block">
        <a href="\"><img class="logo" src="/img/logo.jpg" alt="Логотип платформи"></a>
        <h1>KnowledgeNook | Профіль</h1>
        {% if user_data %}
            <button type="button" class="btn btn-primary btn-rounded" onclick="location.href = '\\admin';">
                Адміністративна панель
            </button>
        {% endif %}
    </div>
</header>
<main>
    <div class="container mt-5 d-flex justify-content-center">

        <div class="card p-3">

            <div class="d-flex align-items-center">

                <div class="image">
                    <img src="data:image/png;base64,{{ user_data.user_icon }}" class="rounded" width="155">
                    <input type="file" id="fileInput" accept="image/png, image/jpeg" style="display: none;">
                    <label style="margin: 4px" for="fileInput" class="btn btn-primary">Змінити фото</label>
                </div>
                <div class="ml-3 w-100">

                    <h4 class="mb-0 mt-0">{{ user_data.name }}</h4>

                    <div class="p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats">

                        <div class="d-flex flex-column">

                            <span class="articles">Записів</span>
                            <span class="number1">{{ num_articles }}</span>

                        </div>


                        <div class="d-flex flex-column">

                            <span class="rating">Рейтинг</span>
                            <span class="number3">{{ user_data.raiting }}<img style="margin: 3px; margin-top: -2px" src="img/star.png" width="14px"></span>


                        </div>

                    </div>

                </div>


            </div>

        </div>

    </div>
</main>

<footer>
    <div>

    </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById("fileInput").addEventListener("change", function () {
        const fileInput = this;

        if (fileInput.files.length > 0) {
            window.location.reload();
            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append("file", file);

            // Send the file to the server using a POST request
            fetch("", {
                method: "POST",
                body: formData,
            })
                .then(response => response.json())
                .then(data => {
                    // Handle the server's response if needed
                    console.log("Server response:", data);
                })
                .catch(error => {
                    console.error("Error:", error);
                });
        }
    });

</script>
</body>
</html>